# YouTube trusted session generator

## Description

This script will output two parameters: po_token and visitor_data. Needed for passing YouTube checks in Invidious.

## What's po_token

po_token known as Proof of Origin Token. This is an attestation token generated by a complex anti robot verification system created by Google named BotGuard/DroidGuard. It is used to confirm that the request is coming from a genuine device.
    
These identity tokens (po_token and visitor_data) generated using this tool will make your entire YouTube session more easily traceable by YouTube because it is tied to a unique identifier.

## Requirement(s)

- You have to run this command on the same public IP address as the one blocked by YouTube. Not necessarily the same machine, just the same public IP address.  
  Subsequent usage of this same token will work on the same IP range or even the same ASN. The point is to generate this token on a blocked IP as "unblocked" IP addresses seems to not generate a token valid for passing the checks on a blocked IP.  

## Tutorial without Docker
1. Install Chromium or Google Chrome.
2. Create a new virtualenv: `virtualenv venv`
3. Activate the virtualenv: `source venv/bin/activate`
4. Install the dependencies: `pip install -r requirements.txt`
5. Run the script: `python index.py`
6. Copy paste the values of these the two parameters (po_token and visitor_data) in config.yaml
   ```
   po_token: XXX
   visitor_data: XXX
   ```
7. Restart Invidious.

## Tutorial with Docker
1. Run the script: `docker run quay.io/invidious/youtube-trusted-session-generator`
2. Copy paste the values of these the two parameters (po_token and visitor_data) in config.yaml
   ```
   po_token: XXX
   visitor_data: XXX
   ```
3. Restart Invidious.

## Why running as root for Docker?

In "headless: false", Chromium does not support sanboxing when it is not ran by root user.